<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Analyzer | Resume Assistant</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --text-dark: #1e293b;
            --text-muted: #64748b;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --ai-message-bg: #f3f4f6;
            --user-message-bg: #2563eb;
            --ai-message-text: #1f2937;
            --user-message-text: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.5;
        }

        .container {
            display: flex;
            width: 100%;
            min-height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            box-shadow: var(--shadow-md);
        }

        .sidebar {
            width: 280px;
            padding: 2rem;
            background-color: white;
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            padding: 2rem;
            background-color: var(--light-bg);
            display: flex;
            flex-direction: column;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
        }

        .sidebar-nav {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .nav-item {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            color: var(--text-dark);
            text-decoration: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-item:hover {
            background-color: #f1f5f9;
        }

        .nav-item.active {
            background-color: #e0e7ff;
            color: var(--primary-color);
            font-weight: 600;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Chat container styles */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .chat-header {
            padding: 1rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .chat-header-icon {
            width: 20px;
            height: 20px;
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            background-color: var(--light-bg);
        }

        .message {
            max-width: 80%;
            padding: 1rem 1.25rem;
            border-radius: var(--radius-lg);
            line-height: 1.5;
            position: relative;
        }

        .ai-message {
            align-self: flex-start;
            background-color: var(--ai-message-bg);
            color: var(--ai-message-text);
            border-bottom-left-radius: var(--radius-sm);
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--user-message-bg);
            color: var(--user-message-text);
            border-bottom-right-radius: var(--radius-sm);
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            text-align: right;
        }

        .user-message .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Uploaded files section - Redesigned */
        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            background-color: white;
        }

        .uploaded-files {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .file-pill {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #e6f0ff;
            padding: 0.5rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            border: 1px solid #cce0ff;
            color: var(--primary-color);
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
            animation: fadeIn 0.3s ease;
        }

        .file-pill:hover {
            background-color: #d6e8ff;
        }

        .file-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .file-remove {
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            margin-left: 0.25rem;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .file-remove:hover {
            background-color: rgba(0, 0, 0, 0.2);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Chat input container */
        .chat-input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 0.75rem;
            position: relative;
        }

        .file-upload-btn {
            background-color: #f1f5f9;
            border: 1px solid var(--border-color);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: all 0.2s;
            height: 40px;
            width: 40px;
        }

        .file-upload-btn:hover {
            background-color: #e5e7eb;
            color: var(--primary-color);
        }

        .file-upload-btn svg {
            width: 20px;
            height: 20px;
        }

        .chat-input-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .chat-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            resize: none;
            min-height: 40px;
            max-height: 150px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            box-shadow: var(--shadow-sm);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
        }

        .send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .send-btn:hover {
            background-color: var(--primary-hover);
        }

        .send-btn:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
        }

        /* Loading indicator */
        .loading-dots {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            align-self: flex-start;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-muted);
            border-radius: 50%;
            animation: bounce 1.5s infinite ease-in-out;
        }

        .loading-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .loading-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loading-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <h2 class="section-title">Resume Analyzer</h2>

            <!-- Navigation -->
            <div class="sidebar-nav">
                <a href="/dashboard" class="nav-item">
                    <span class="nav-icon">📊</span>
                    <span>Dashboard</span>
                </a>
                <a href="/resume-insights" class="nav-item">
                    <span class="nav-icon">📚</span>
                    <span>Resume Insights</span>
                </a>
                <a href="/course-recommendations" class="nav-item">
                    <span class="nav-icon">🎓</span>
                    <span>Course Recommendations</span>
                </a>
                <a href="/chatbot" class="nav-item active">
                    <span class="nav-icon">💬</span>
                    <span>Resume Assistant</span>
                </a>
            </div>
        </div>

        <div class="main-content">
            <!-- Chat Container -->
            <div class="chat-container">
                <div class="chat-header">
                    <svg class="chat-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"></path>
                    </svg>
                    <span>Resume Assistant</span>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Default welcome message -->
                    <div class="message ai-message">
                        Hello! I'm your resume assistant. I can help you analyze your resume, suggest improvements, and
                        answer career-related questions. Upload your resume to get started.
                        <div class="message-time" id="welcomeTime"></div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <!-- Uploaded files will appear here -->
                    <div class="uploaded-files" id="uploadedFilesContainer"></div>

                    <div class="chat-input-wrapper">
                        <button class="file-upload-btn" id="fileUploadBtn" title="Upload Resume">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <input type="file" id="fileInput" accept=".pdf,.doc,.docx" style="display: none;">
                        </button>

                        <div class="chat-input-area">
                            <textarea class="chat-input" id="chatInput"
                                placeholder="Ask a question about your resume..." rows="1"></textarea>
                        </div>

                        <button class="send-btn" id="sendBtn" disabled>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set welcome message time
        document.getElementById('welcomeTime').textContent = formatTime(new Date());

        // Store uploaded files
        const uploadedFiles = [];

        // File upload handling
        document.getElementById('fileUploadBtn').addEventListener('click', function () {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', function (e) {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];

                if (validTypes.includes(file.type)) {
                    // Add file to uploaded files array
                    uploadedFiles.push(file);

                    // Update the uploaded files display
                    updateUploadedFilesDisplay();

                    // Enable send button
                    document.getElementById('sendBtn').disabled = false;

                    // No system message about the file upload now
                } else {
                    alert('Please upload a PDF or Word document.');
                }

                // Reset the file input
                e.target.value = '';
            }
        });

        // Update uploaded files display
        function updateUploadedFilesDisplay() {
            const container = document.getElementById('uploadedFilesContainer');
            container.innerHTML = '';

            if (uploadedFiles.length === 0) {
                container.style.display = 'none';
                return;
            }

            container.style.display = 'flex';

            uploadedFiles.forEach((file, index) => {
                const fileExt = file.name.split('.').pop().toLowerCase();
                let fileIcon = '📄';

                if (fileExt === 'pdf') {
                    fileIcon = '📕';
                } else if (fileExt === 'doc' || fileExt === 'docx') {
                    fileIcon = '📘';
                }

                const filePill = document.createElement('div');
                filePill.className = 'file-pill';
                filePill.innerHTML = `
                    <span class="file-icon">${fileIcon}</span>
                    <span>${file.name}</span>
                    <span class="file-remove" data-index="${index}" title="Remove file">×</span>
                `;
                container.appendChild(filePill);

                // Add event listener to remove button
                filePill.querySelector('.file-remove').addEventListener('click', function () {
                    const fileIndex = parseInt(this.getAttribute('data-index'));
                    uploadedFiles.splice(fileIndex, 1);
                    updateUploadedFilesDisplay();

                    // Disable send button if no files and no message
                    if (uploadedFiles.length === 0 && document.getElementById('chatInput').value.trim() === '') {
                        document.getElementById('sendBtn').disabled = true;
                    }
                });
            });
        }

        // Format time
        function formatTime(date) {
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Add message to chat
        function addMessage(sender, text) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.innerHTML = `
                ${text}
                <div class="message-time">${formatTime(new Date())}</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Enable/disable send button based on input
        document.getElementById('chatInput').addEventListener('input', function () {
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = this.value.trim() === '' && uploadedFiles.length === 0;
        });

        // Send message
        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('chatInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (message || uploadedFiles.length > 0) {
                // Add user message
                if (message) {
                    addMessage('user', message);
                } else if (uploadedFiles.length > 0 && !message) {
                    // If there's no message but there are files, add a default message
                    addMessage('user', "Please analyze my resume.");
                }

                input.value = '';

                // Reset input height
                input.style.height = 'auto';

                // Show loading indicator
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'loading-dots';
                loadingDiv.innerHTML = `
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                `;
                document.getElementById('chatMessages').appendChild(loadingDiv);
                document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;

                // Simulate AI response
                setTimeout(() => {
                    document.getElementById('chatMessages').removeChild(loadingDiv);

                    // Sample responses based on whether a file was uploaded
                    let sampleResponses;

                    if (uploadedFiles.length > 0) {
                        sampleResponses = [
                            "Based on your resume, I recommend highlighting your project management experience more prominently.",
                            "Your skills section could be stronger by adding more specific technical skills relevant to your target jobs.",
                            "The work experience section is well-structured, but you could quantify your achievements with numbers.",
                            "Consider adding a summary section at the top to quickly showcase your value proposition."
                        ];
                    } else {
                        sampleResponses = [
                            "I'd be happy to help you with your resume. Could you upload it so I can provide specific feedback?",
                            "To give you personalized advice, I'll need to see your resume. Please upload it using the button below.",
                            "Let me know what specific aspect of your resume you'd like help with after uploading it.",
                            "Upload your resume and I can suggest improvements tailored to your experience and career goals."
                        ];
                    }

                    const randomResponse = sampleResponses[Math.floor(Math.random() * sampleResponses.length)];
                    addMessage('ai', randomResponse);
                }, 1500);
            }
        }

        // Auto-resize textarea
        document.getElementById('chatInput').addEventListener('input', function () {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Initially hide the uploaded files container
        document.getElementById('uploadedFilesContainer').style.display = 'none';
    </script>
</body>

</html>